# This test runs a linear ITG instability calculation using W7X geometry.
# This test uses a Boltzmann adiabatic electron response.

 debug = false

[Dimensions]
 ntheta = 256           # number of points along field line (theta)
 nperiod = 1            # number of 2pi segments along field line is 2*nperiod-1
 nky = 28               # number of (de-aliased) fourier modes in y
 nkx = 1                # number of (de-aliased) fourier modes in x

 nhermite = 16          # number of hermite moments (v_parallel resolution)
 nlaguerre = 8          # number of laguerre moments (mu B resolution)
 nspecies = 1           # number of evolved kinetic species (adiabatic electrons don't count towards nspecies)

[Domain]
 y0 = 10.0              # controls box length in y (in units of rho_ref) and minimum ky, so that ky_min*rho_ref = 1/y0 
 boundary = "linked"    # use twist-shift boundary conditions along field line

[Physics]
 beta = 0.0                      # reference normalized pressure, beta = n_ref T_ref / ( B_ref^2 / (8 pi))
 nonlinear_mode = false          # this is a linear calculation

[Time]
 t_max = 200.0          # end time (in units of L_ref/vt_ref)
 scheme = "rk3"         # use RK4 timestepping scheme (with adaptive timestepping)

[Initialization]
 ikpar_init = 0                  # parallel wavenumber of initial perturbation
 init_field = "density"          # initial condition set in density
 init_amp = 1.0e-5               # amplitude of initial condition

[Geometry]
 geo_option = "vmec"           # use VMEC geometry
 # Name of the vmec file
 vmec_file = "wout_w7x.nc"

 #Field line label zeta - q*theta. alpha = 0.0 usually coerresponds to a
 #field line on the outboard side
 alpha = 0.0

 # Number of poloidal turns.
 # The field line goes from (-npol*PI, npol*PI]
 # Extra info : In GS2 or GX files this would correspond to  nperiod = (npol+1)/2.
 npol = 6

 # Normalized toroidal flux (or s) is how vmec labels surfaces.
 # s goes from [0,1] where 0 is the magnetic axis and 1 is the
 # last closed flux surface.
 torflux = 0.64

# it is okay to have extra species data here; only the first nspecies elements of each item are used
[species]
 z     = [ 1.0,      -1.0     ]         # charge (normalized to Z_ref)
 mass  = [ 1.0,       2.7e-4  ]         # mass (normalized to m_ref)
 dens  = [ 1.0,       1.0     ]         # density (normalized to dens_ref)
 temp  = [ 1.0,       1.0     ]         # temperature (normalized to T_ref)
 tprim = [ 3.0,       0.0     ]         # temperature gradient, L_ref/L_T
 fprim = [ 1.0,       0.0     ]         # density gradient, L_ref/L_n
 vnewk = [ 0.0,       0.0     ]         # collision frequency
 type  = [ "ion",  "electron" ]         # species type

[Boltzmann]
 add_Boltzmann_species = true    # use a Boltzmann species
 Boltzmann_type = "electrons"    # the Boltzmann species will be electrons
 tau_fac = 1.0                   # temperature ratio, T_i/T_e

[Dissipation]
 closure_model = "none"          # no closure assumptions (just truncation)
 hypercollisions = false         # don't use hypercollision model
 nu_hyper_m = 0.1                # coefficient of hermite hypercollisions
 p_hyper_m = 6                   # exponent of hermite hypercollisions
 nu_hyper_l = 0.1                # coefficient of laguerre hypercollisions
 p_hyper_l = 6                   # exponent of laguerre hypercollisions

[Diagnostics]
 nwrite = 1000                  # write diagnostics every nwrite timesteps
 omega  = true                  # compute and write growth rates and frequencies
 free_energy = true             # compute and write free energy spectra (Wg, Wphi, Phi**2)
 fluxes = true                  # compute and write flux spectra (Q, Gamma)
 fields = true                  # write fields on the grid
 moments = true                 # write moments on the grid
 
